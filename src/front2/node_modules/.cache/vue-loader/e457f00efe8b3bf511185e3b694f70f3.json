{"remainingRequest":"/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kamil/go/src/e-clinic/src/front2/src/views/Appointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kamil/go/src/e-clinic/src/front2/src/views/Appointments.vue","mtime":1610198350915},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/cache-loader/dist/cjs.js","mtime":1593024481129},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/babel-loader/lib/index.js","mtime":1606043533106},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/cache-loader/dist/cjs.js","mtime":1593024481129},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/index.js","mtime":1606043535851}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFwcG9pbnRtZW50cyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhdGllbnRJRDogIjE0N2ZjODY4LWVmYTctNGYzNy1iODVjLTZhM2YwNWU3OGI0NCIsCiAgICAgIGNvbW1lbnQ6ICIiLAogICAgICBzeW1wdG9tczogIiIsCiAgICAgIGZlZUlEOiAiIiwKICAgICAgdGltZTogIiIsCiAgICAgIHNwZWNpYWxpc3RzOiBbXSwKICAgICAgZHVyYXRpb246ICIiLAogICAgICBhcHBvaW50bWVudHM6IFtdLAogICAgICBkdXJhdGlvbnM6IFsKICAgICAgICB7CiAgICAgICAgICBmbG9hdDogMC41LAogICAgICAgICAgdGV4dDogIjMwbWluIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZsb2F0OiAwLjc1LAogICAgICAgICAgdGV4dDogIjQ1bWluIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZsb2F0OiAxLAogICAgICAgICAgdGV4dDogIjYwbWluIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZsb2F0OiAxLjUsCiAgICAgICAgICB0ZXh0OiAiOTBtaW4iLAogICAgICAgIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2xlYXJGb3JtKCkgewogICAgICB0aGlzLmZlZUlEID0gIiI7CiAgICAgIHRoaXMudGltZSA9ICIiOwogICAgICB0aGlzLmR1cmF0aW9uID0gIiI7CiAgICAgIHRoaXMuY29tbWVudCA9ICIiOwogICAgICB0aGlzLnN5bXB0b21zID0gIiI7CiAgICB9LAogICAgZ2V0QXBwb2ludG1lbnRzKCkgewogICAgICBheGlvcwogICAgICAgIC5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL3YxL0Fzc2lzdGFudC9HZXRBcHBvaW50bWVudHNgLCB7CiAgICAgICAgICBpZDogdGhpcy5wYXRpZW50SUQsCiAgICAgICAgICB1c2VyX3R5cGU6ICJwYXRpZW50IiwKICAgICAgICAgIHJhbmdlOiB7CiAgICAgICAgICAgIGZyb206ICIyMDIwLTEwLTEzVDA2OjAxOjA3KzAyOjAwIiwKICAgICAgICAgICAgdG86ICIyMDIyLTAxLTA0VDEzOjAxOjE4KzAxOjAwIiwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy5hcHBvaW50bWVudHMgPSByZXNwb25zZS5kYXRhLmFwcG9pbnRtZW50czsKICAgICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIGxldCBzcGVjaWFsaXN0X2lkID0gIiI7CiAgICAgIGxldCBzcGVjaWFsaXR5ID0gIiI7CiAgICAgIGZvciAoY29uc3QgaSBpbiB0aGlzLnNwZWNpYWxpc3RzKSB7CiAgICAgICAgaWYgKHRoaXMuc3BlY2lhbGlzdHNbaV0uZmVlX2lkID09IHRoaXMuZmVlSUQpIHsKICAgICAgICAgIHNwZWNpYWxpc3RfaWQgPSB0aGlzLnNwZWNpYWxpc3RzW2ldLnNwZWNpYWxpc3RfaWQ7CiAgICAgICAgICBzcGVjaWFsaXR5ID0gdGhpcy5zcGVjaWFsaXN0c1tpXS5zcGVjaWFsaXR5OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHNwZWNpYWxpc3RfaWQpOwoKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS92MS9Bc3Npc3RhbnQvQ3JlYXRlQXBwb2ludG1lbnQiLCB7CiAgICAgICAgICBwYXRpZW50X2lkOiB0aGlzLnBhdGllbnRJRCwKICAgICAgICAgIHNwZWNpYWxpc3RfaWQ6IHNwZWNpYWxpc3RfaWQsCiAgICAgICAgICBzcGVjaWFsaXR5OiBzcGVjaWFsaXR5LAogICAgICAgICAgc2NoZWR1bGVkX2F0OiBuZXcgRGF0ZSh0aGlzLnRpbWUpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiAqIDM2MDAgKiAxZTksIC8vIGR1cmF0aW9uIGluIG5hbm9zZWNvbmRzCiAgICAgICAgICBwYXRpZW50X2NvbW1lbnQ6IHRoaXMuY29tbWVudCwKICAgICAgICAgIHBhdGllbnRfc3ltcHRvbXM6IHRoaXMuc3ltcHRvbXMuc3BsaXQoIjsiKSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSh0aGlzLmNsZWFyRm9ybSgpKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgYXhpb3MKICAgICAgLmdldChgaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS92MS9Bc3Npc3RhbnQvR2V0U3BlY2lhbGlzdHNgKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICB0aGlzLnNwZWNpYWxpc3RzID0gcmVzcG9uc2UuZGF0YS5zcGVjaWFsaXN0czsKICAgICAgfSk7CiAgICAgIHRoaXMuZ2V0QXBwb2ludG1lbnRzKCkKICB9LAogIGZvcm1hdFRpbWUodGltZSkgewogICAgcmV0dXJuICJlbG8iICsgdGltZQogIH0KfTsKLy8gIzAwN2JmZgo="},{"version":3,"sources":["Appointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Appointments.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <h1>Make an appointment</h1>\n    <br />\n    <form class=\"form\" v-if=\"specialists\" v-on:submit.prevent=\"submit\">\n      <div class=\"form-group row\">\n        <label for=\"comment\" class=\"col-4 col-form-label\"\n          >Describe your case</label\n        >\n        <div class=\"col-4\">\n          <textarea\n            id=\"comment\"\n            name=\"comment\"\n            cols=\"40\"\n            rows=\"5\"\n            required=\"required\"\n            class=\"form-control\"\n            v-model=\"comment\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"symptoms\" class=\"col-4 col-form-label\"\n          >Describe symptoms</label\n        >\n        <div class=\"col-4\">\n          <input\n            id=\"symptoms\"\n            name=\"symptoms\"\n            placeholder=\"itching;pain;nausea\"\n            type=\"text\"\n            class=\"form-control\"\n            aria-describedby=\"symptomsHelpBlock\"\n            v-model=\"symptoms\"\n          />\n          <span id=\"symptomsHelpBlock\" class=\"form-text text-muted\"\n            >separate each symptom with ;</span\n          >\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"select\" class=\"col-4 col-form-label\">Specialist</label>\n        <div class=\"col-4\">\n          <select\n            id=\"select\"\n            name=\"select\"\n            class=\"custom-select\"\n            required=\"required\"\n            v-model=\"feeID\"\n          >\n            <option\n              v-bind:value=\"spec.fee_id\"\n              v-bind:key=\"inx\"\n              v-for=\"(spec, inx) in specialists\"\n            >\n              {{ spec.name }} {{ spec.surname }} -- {{ spec.speciality }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"example-datetime-local-input\" class=\"col-4 col-form-label\"\n          >Date and time</label\n        >\n        <div class=\"col-4\">\n          <input\n            class=\"form-control\"\n            type=\"datetime-local\"\n            value=\"2011-08-19T13:45:00\"\n            id=\"example-datetime-local-input\"\n            v-model=\"time\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"select\" class=\"col-4 col-form-label\">Duration</label>\n        <div class=\"col-4\">\n          <select\n            id=\"select\"\n            name=\"select\"\n            class=\"custom-select\"\n            required=\"required\"\n            v-model=\"duration\"\n          >\n            <option\n              v-bind:value=\"d.float\"\n              v-bind:key=\"inx\"\n              v-for=\"(d, inx) in durations\"\n            >\n              {{ d.text }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <div class=\"offset-4 col-4\">\n          <button name=\"submit\" class=\"btn btn-primary\">Submit</button>\n        </div>\n      </div>\n    </form>\n\n    <hr />\n    <h1>Your appointments</h1>\n    <table v-if=\"appointments\" class=\"tg\" id=\"customers\">\n      <thead>\n        <tr>\n          <th class=\"tg-0lax\">Status</th>\n          <th class=\"tg-0lax\">Time</th>\n          <th class=\"tg-0lax\">Duration(min)</th>\n        </tr>\n      </thead>\n      <tbody>\n        <router-link\n          v-bind:key=\"ap.id\"\n          v-for=\"ap in appointments\"\n          tag=\"tr\"\n          :to=\"{ name: 'appointment', params: { id: ap.appointment.id } }\"\n        >\n          <td class=\"tg-0lax\">\n            <b>{{ ap.appointment.state }}</b>\n          </td>\n          <td class=\"tg-0lax\">{{ ap.appointment.scheduled_time }}</td>\n          <td class=\"tg-0lax\">{{ ap.appointment.duration / 30}}</td>\n        </router-link>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Appointments\",\n  data() {\n    return {\n      patientID: \"147fc868-efa7-4f37-b85c-6a3f05e78b44\",\n      comment: \"\",\n      symptoms: \"\",\n      feeID: \"\",\n      time: \"\",\n      specialists: [],\n      duration: \"\",\n      appointments: [],\n      durations: [\n        {\n          float: 0.5,\n          text: \"30min\",\n        },\n        {\n          float: 0.75,\n          text: \"45min\",\n        },\n        {\n          float: 1,\n          text: \"60min\",\n        },\n        {\n          float: 1.5,\n          text: \"90min\",\n        },\n      ],\n    };\n  },\n  methods: {\n    clearForm() {\n      this.feeID = \"\";\n      this.time = \"\";\n      this.duration = \"\";\n      this.comment = \"\";\n      this.symptoms = \"\";\n    },\n    getAppointments() {\n      axios\n        .post(`http://localhost:8081/api/v1/Assistant/GetAppointments`, {\n          id: this.patientID,\n          user_type: \"patient\",\n          range: {\n            from: \"2020-10-13T06:01:07+02:00\",\n            to: \"2022-01-04T13:01:18+01:00\",\n          },\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.appointments = response.data.appointments;\n        });\n    },\n    submit() {\n      let specialist_id = \"\";\n      let speciality = \"\";\n      for (const i in this.specialists) {\n        if (this.specialists[i].fee_id == this.feeID) {\n          specialist_id = this.specialists[i].specialist_id;\n          speciality = this.specialists[i].speciality;\n          break;\n        }\n      }\n      console.log(specialist_id);\n\n      axios\n        .post(\"http://localhost:8081/api/v1/Assistant/CreateAppointment\", {\n          patient_id: this.patientID,\n          specialist_id: specialist_id,\n          speciality: speciality,\n          scheduled_at: new Date(this.time).toISOString(),\n          duration: this.duration * 3600 * 1e9, // duration in nanoseconds\n          patient_comment: this.comment,\n          patient_symptoms: this.symptoms.split(\";\"),\n        })\n        .then((res) => {\n          console.log(res);\n        })\n        .finally(this.clearForm());\n    },\n  },\n  created() {\n    axios\n      .get(`http://localhost:8081/api/v1/Assistant/GetSpecialists`)\n      .then((response) => {\n        console.log(response.data);\n        this.specialists = response.data.specialists;\n      });\n      this.getAppointments()\n  },\n  formatTime(time) {\n    return \"elo\" + time\n  }\n};\n// #007bff\n</script>\n\n<style scoped>\nlabel {\n  font-family: Avenir, Helvetica, Arial, sans-serif !important;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>"]}]}