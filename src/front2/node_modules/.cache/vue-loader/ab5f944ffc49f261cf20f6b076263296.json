{"remainingRequest":"/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kamil/go/src/e-clinic/src/front2/src/views/Appointments.vue?vue&type=style&index=0&id=45b08fee&scoped=true&lang=css&","dependencies":[{"path":"/home/kamil/go/src/e-clinic/src/front2/src/views/Appointments.vue","mtime":1610288463037},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpsYWJlbCB7CiAgZm9udC1mYW1pbHk6IEF2ZW5pciwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZiAhaW1wb3J0YW50OwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiAjMmMzZTUwOwp9Cg=="},{"version":3,"sources":["Appointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkPA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Appointments.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <h1>Make an appointment</h1>\n    <br />\n    <form class=\"form\" v-if=\"specialists\" v-on:submit.prevent=\"submit\">\n      <div class=\"form-group row\">\n        <label for=\"comment\" class=\"col-4 col-form-label\"\n          >Describe your case</label\n        >\n        <div class=\"col-4\">\n          <textarea\n            id=\"comment\"\n            name=\"comment\"\n            cols=\"40\"\n            rows=\"5\"\n            required=\"required\"\n            class=\"form-control\"\n            v-model=\"comment\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"symptoms\" class=\"col-4 col-form-label\"\n          >Describe symptoms</label\n        >\n        <div class=\"col-4\">\n          <input\n            id=\"symptoms\"\n            name=\"symptoms\"\n            placeholder=\"itching;pain;nausea\"\n            type=\"text\"\n            class=\"form-control\"\n            aria-describedby=\"symptomsHelpBlock\"\n            v-model=\"symptoms\"\n          />\n          <span id=\"symptomsHelpBlock\" class=\"form-text text-muted\"\n            >separate each symptom with ;</span\n          >\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"select\" class=\"col-4 col-form-label\">Specialist</label>\n        <div class=\"col-4\">\n          <select\n            id=\"select\"\n            name=\"select\"\n            class=\"custom-select\"\n            required=\"required\"\n            v-model=\"feeID\"\n          >\n            <option\n              v-bind:value=\"spec.fee_id\"\n              v-bind:key=\"inx\"\n              v-for=\"(spec, inx) in specialists\"\n            >\n              {{ spec.name }} {{ spec.surname }} -- {{ spec.speciality }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"example-datetime-local-input\" class=\"col-4 col-form-label\"\n          >Date and time</label\n        >\n        <div class=\"col-4\">\n          <input\n            class=\"form-control\"\n            type=\"datetime-local\"\n            value=\"2011-08-19T13:45:00\"\n            id=\"example-datetime-local-input\"\n            v-model=\"time\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"select\" class=\"col-4 col-form-label\">Duration</label>\n        <div class=\"col-4\">\n          <select\n            id=\"select\"\n            name=\"select\"\n            class=\"custom-select\"\n            required=\"required\"\n            v-model=\"duration\"\n          >\n            <option\n              v-bind:value=\"d.float\"\n              v-bind:key=\"inx\"\n              v-for=\"(d, inx) in durations\"\n            >\n              {{ d.text }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <div class=\"offset-4 col-4\">\n          <button name=\"submit\" class=\"btn btn-primary\">Submit</button>\n        </div>\n      </div>\n    </form>\n\n    <hr />\n    <h1>Your appointments</h1>\n    <h4>Click to see details</h4>\n    <table v-if=\"appointments\" class=\"tg\" id=\"customers\">\n      <thead>\n        <tr>\n          <th class=\"tg-0lax\">Status</th>\n          <th class=\"tg-0lax\">Time</th>\n          <th class=\"tg-0lax\">Duration(min)</th>\n        </tr>\n      </thead>\n      <tbody>\n        <router-link\n          v-bind:key=\"ap.id\"\n          v-for=\"ap in appointments\"\n          tag=\"tr\"\n          :to=\"{ name: 'appointment', params: { id: ap.appointment.id } }\"\n        >\n          <td class=\"tg-0lax\">\n            <b>{{ ap.appointment.state }}</b>\n          </td>\n          <td class=\"tg-0lax\">{{ ap.appointment.scheduled_time }}</td>\n          <td class=\"tg-0lax\">{{ ap.appointment.duration / 30 }}</td>\n        </router-link>\n      </tbody>\n    </table>\n\n    <div>\n      <b-modal id=\"modal-1\" title=\"BootstrapVue\">\n        <p class=\"my-4\">Can't create appointment without account. Go to Profile!</p>\n      </b-modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Appointments\",\n  data() {\n    return {\n      comment: \"\",\n      symptoms: \"\",\n      feeID: \"\",\n      time: \"\",\n      specialists: [],\n      duration: \"\",\n      appointments: [],\n      durations: [\n        {\n          float: 0.5,\n          text: \"30min\",\n        },\n        {\n          float: 0.75,\n          text: \"45min\",\n        },\n        {\n          float: 1,\n          text: \"60min\",\n        },\n        {\n          float: 1.5,\n          text: \"90min\",\n        },\n      ],\n    };\n  },\n  methods: {\n    clearForm() {\n      this.feeID = \"\";\n      this.time = \"\";\n      this.duration = \"\";\n      this.comment = \"\";\n      this.symptoms = \"\";\n    },\n    getAppointments() {\n      axios\n        .post(`http://localhost:8081/api/v1/Assistant/GetAppointments`, {\n          id: this.$cookies.get(\"uuid\"),\n          user_type: \"patient\",\n          range: {\n            from: \"2020-10-13T06:01:07+02:00\",\n            to: \"2022-01-04T13:01:18+01:00\",\n          },\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.appointments = response.data.appointments;\n        });\n    },\n    submit() {\n      if (this.$cookies.get(\"uuid\") === null) {\n        this.$bvModal.show(\"modal-1\")\n        return\n      }\n      let specialist_id = \"\";\n      let speciality = \"\";\n      for (const i in this.specialists) {\n        if (this.specialists[i].fee_id == this.feeID) {\n          specialist_id = this.specialists[i].specialist_id;\n          speciality = this.specialists[i].speciality;\n          break;\n        }\n      }\n      console.log(specialist_id);\n\n      axios\n        .post(\"http://localhost:8081/api/v1/Assistant/CreateAppointment\", {\n          patient_id: this.$cookies.get(\"uuid\"),\n          specialist_id: specialist_id,\n          speciality: speciality,\n          scheduled_at: new Date(this.time).toISOString(),\n          duration: this.duration * 3600 * 1e9, // duration in nanoseconds\n          patient_comment: this.comment,\n          patient_symptoms: this.symptoms.split(\";\"),\n        })\n        .then((res) => {\n          console.log(res);\n        })\n        .finally(this.clearForm());\n    },\n  },\n  created() {\n    axios\n      .get(`http://localhost:8081/api/v1/Assistant/GetSpecialists`)\n      .then((response) => {\n        console.log(response.data);\n        this.specialists = response.data.specialists;\n      });\n    this.getAppointments();\n  },\n  formatTime(time) {\n    return \"elo\" + time;\n  },\n};\n// #007bff\n</script>\n\n<style scoped>\nlabel {\n  font-family: Avenir, Helvetica, Arial, sans-serif !important;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>"]}]}