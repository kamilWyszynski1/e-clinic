{"remainingRequest":"/home/kamil/go/src/e-clinic/src/front2/node_modules/babel-loader/lib/index.js!/home/kamil/go/src/e-clinic/src/front2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kamil/go/src/e-clinic/src/front2/src/views/Appointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kamil/go/src/e-clinic/src/front2/src/views/Appointments.vue","mtime":1610288463037},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kamil/go/src/e-clinic/src/front2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHBvaW50bWVudHMiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50OiAiIiwKICAgICAgc3ltcHRvbXM6ICIiLAogICAgICBmZWVJRDogIiIsCiAgICAgIHRpbWU6ICIiLAogICAgICBzcGVjaWFsaXN0czogW10sCiAgICAgIGR1cmF0aW9uOiAiIiwKICAgICAgYXBwb2ludG1lbnRzOiBbXSwKICAgICAgZHVyYXRpb25zOiBbewogICAgICAgIGZsb2F0OiAwLjUsCiAgICAgICAgdGV4dDogIjMwbWluIgogICAgICB9LCB7CiAgICAgICAgZmxvYXQ6IDAuNzUsCiAgICAgICAgdGV4dDogIjQ1bWluIgogICAgICB9LCB7CiAgICAgICAgZmxvYXQ6IDEsCiAgICAgICAgdGV4dDogIjYwbWluIgogICAgICB9LCB7CiAgICAgICAgZmxvYXQ6IDEuNSwKICAgICAgICB0ZXh0OiAiOTBtaW4iCiAgICAgIH1dCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2xlYXJGb3JtOiBmdW5jdGlvbiBjbGVhckZvcm0oKSB7CiAgICAgIHRoaXMuZmVlSUQgPSAiIjsKICAgICAgdGhpcy50aW1lID0gIiI7CiAgICAgIHRoaXMuZHVyYXRpb24gPSAiIjsKICAgICAgdGhpcy5jb21tZW50ID0gIiI7CiAgICAgIHRoaXMuc3ltcHRvbXMgPSAiIjsKICAgIH0sCiAgICBnZXRBcHBvaW50bWVudHM6IGZ1bmN0aW9uIGdldEFwcG9pbnRtZW50cygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hcGkvdjEvQXNzaXN0YW50L0dldEFwcG9pbnRtZW50cyIsIHsKICAgICAgICBpZDogdGhpcy4kY29va2llcy5nZXQoInV1aWQiKSwKICAgICAgICB1c2VyX3R5cGU6ICJwYXRpZW50IiwKICAgICAgICByYW5nZTogewogICAgICAgICAgZnJvbTogIjIwMjAtMTAtMTNUMDY6MDE6MDcrMDI6MDAiLAogICAgICAgICAgdG86ICIyMDIyLTAxLTA0VDEzOjAxOjE4KzAxOjAwIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICBfdGhpcy5hcHBvaW50bWVudHMgPSByZXNwb25zZS5kYXRhLmFwcG9pbnRtZW50czsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLiRjb29raWVzLmdldCgidXVpZCIpID09PSBudWxsKSB7CiAgICAgICAgdGhpcy4kYnZNb2RhbC5zaG93KCJtb2RhbC0xIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc3BlY2lhbGlzdF9pZCA9ICIiOwogICAgICB2YXIgc3BlY2lhbGl0eSA9ICIiOwoKICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnNwZWNpYWxpc3RzKSB7CiAgICAgICAgaWYgKHRoaXMuc3BlY2lhbGlzdHNbaV0uZmVlX2lkID09IHRoaXMuZmVlSUQpIHsKICAgICAgICAgIHNwZWNpYWxpc3RfaWQgPSB0aGlzLnNwZWNpYWxpc3RzW2ldLnNwZWNpYWxpc3RfaWQ7CiAgICAgICAgICBzcGVjaWFsaXR5ID0gdGhpcy5zcGVjaWFsaXN0c1tpXS5zcGVjaWFsaXR5OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zb2xlLmxvZyhzcGVjaWFsaXN0X2lkKTsKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaS92MS9Bc3Npc3RhbnQvQ3JlYXRlQXBwb2ludG1lbnQiLCB7CiAgICAgICAgcGF0aWVudF9pZDogdGhpcy4kY29va2llcy5nZXQoInV1aWQiKSwKICAgICAgICBzcGVjaWFsaXN0X2lkOiBzcGVjaWFsaXN0X2lkLAogICAgICAgIHNwZWNpYWxpdHk6IHNwZWNpYWxpdHksCiAgICAgICAgc2NoZWR1bGVkX2F0OiBuZXcgRGF0ZSh0aGlzLnRpbWUpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb24gKiAzNjAwICogMWU5LAogICAgICAgIC8vIGR1cmF0aW9uIGluIG5hbm9zZWNvbmRzCiAgICAgICAgcGF0aWVudF9jb21tZW50OiB0aGlzLmNvbW1lbnQsCiAgICAgICAgcGF0aWVudF9zeW1wdG9tczogdGhpcy5zeW1wdG9tcy5zcGxpdCgiOyIpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIH0pLmZpbmFsbHkodGhpcy5jbGVhckZvcm0oKSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpL3YxL0Fzc2lzdGFudC9HZXRTcGVjaWFsaXN0cyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICBfdGhpczIuc3BlY2lhbGlzdHMgPSByZXNwb25zZS5kYXRhLnNwZWNpYWxpc3RzOwogICAgfSk7CiAgICB0aGlzLmdldEFwcG9pbnRtZW50cygpOwogIH0sCiAgZm9ybWF0VGltZTogZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lKSB7CiAgICByZXR1cm4gImVsbyIgKyB0aW1lOwogIH0KfTsgLy8gIzAwN2JmZg=="},{"version":3,"sources":["Appointments.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <h1>Make an appointment</h1>\n    <br />\n    <form class=\"form\" v-if=\"specialists\" v-on:submit.prevent=\"submit\">\n      <div class=\"form-group row\">\n        <label for=\"comment\" class=\"col-4 col-form-label\"\n          >Describe your case</label\n        >\n        <div class=\"col-4\">\n          <textarea\n            id=\"comment\"\n            name=\"comment\"\n            cols=\"40\"\n            rows=\"5\"\n            required=\"required\"\n            class=\"form-control\"\n            v-model=\"comment\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"symptoms\" class=\"col-4 col-form-label\"\n          >Describe symptoms</label\n        >\n        <div class=\"col-4\">\n          <input\n            id=\"symptoms\"\n            name=\"symptoms\"\n            placeholder=\"itching;pain;nausea\"\n            type=\"text\"\n            class=\"form-control\"\n            aria-describedby=\"symptomsHelpBlock\"\n            v-model=\"symptoms\"\n          />\n          <span id=\"symptomsHelpBlock\" class=\"form-text text-muted\"\n            >separate each symptom with ;</span\n          >\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"select\" class=\"col-4 col-form-label\">Specialist</label>\n        <div class=\"col-4\">\n          <select\n            id=\"select\"\n            name=\"select\"\n            class=\"custom-select\"\n            required=\"required\"\n            v-model=\"feeID\"\n          >\n            <option\n              v-bind:value=\"spec.fee_id\"\n              v-bind:key=\"inx\"\n              v-for=\"(spec, inx) in specialists\"\n            >\n              {{ spec.name }} {{ spec.surname }} -- {{ spec.speciality }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"example-datetime-local-input\" class=\"col-4 col-form-label\"\n          >Date and time</label\n        >\n        <div class=\"col-4\">\n          <input\n            class=\"form-control\"\n            type=\"datetime-local\"\n            value=\"2011-08-19T13:45:00\"\n            id=\"example-datetime-local-input\"\n            v-model=\"time\"\n          />\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"select\" class=\"col-4 col-form-label\">Duration</label>\n        <div class=\"col-4\">\n          <select\n            id=\"select\"\n            name=\"select\"\n            class=\"custom-select\"\n            required=\"required\"\n            v-model=\"duration\"\n          >\n            <option\n              v-bind:value=\"d.float\"\n              v-bind:key=\"inx\"\n              v-for=\"(d, inx) in durations\"\n            >\n              {{ d.text }}\n            </option>\n          </select>\n        </div>\n      </div>\n      <div class=\"form-group row\">\n        <div class=\"offset-4 col-4\">\n          <button name=\"submit\" class=\"btn btn-primary\">Submit</button>\n        </div>\n      </div>\n    </form>\n\n    <hr />\n    <h1>Your appointments</h1>\n    <h4>Click to see details</h4>\n    <table v-if=\"appointments\" class=\"tg\" id=\"customers\">\n      <thead>\n        <tr>\n          <th class=\"tg-0lax\">Status</th>\n          <th class=\"tg-0lax\">Time</th>\n          <th class=\"tg-0lax\">Duration(min)</th>\n        </tr>\n      </thead>\n      <tbody>\n        <router-link\n          v-bind:key=\"ap.id\"\n          v-for=\"ap in appointments\"\n          tag=\"tr\"\n          :to=\"{ name: 'appointment', params: { id: ap.appointment.id } }\"\n        >\n          <td class=\"tg-0lax\">\n            <b>{{ ap.appointment.state }}</b>\n          </td>\n          <td class=\"tg-0lax\">{{ ap.appointment.scheduled_time }}</td>\n          <td class=\"tg-0lax\">{{ ap.appointment.duration / 30 }}</td>\n        </router-link>\n      </tbody>\n    </table>\n\n    <div>\n      <b-modal id=\"modal-1\" title=\"BootstrapVue\">\n        <p class=\"my-4\">Can't create appointment without account. Go to Profile!</p>\n      </b-modal>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Appointments\",\n  data() {\n    return {\n      comment: \"\",\n      symptoms: \"\",\n      feeID: \"\",\n      time: \"\",\n      specialists: [],\n      duration: \"\",\n      appointments: [],\n      durations: [\n        {\n          float: 0.5,\n          text: \"30min\",\n        },\n        {\n          float: 0.75,\n          text: \"45min\",\n        },\n        {\n          float: 1,\n          text: \"60min\",\n        },\n        {\n          float: 1.5,\n          text: \"90min\",\n        },\n      ],\n    };\n  },\n  methods: {\n    clearForm() {\n      this.feeID = \"\";\n      this.time = \"\";\n      this.duration = \"\";\n      this.comment = \"\";\n      this.symptoms = \"\";\n    },\n    getAppointments() {\n      axios\n        .post(`http://localhost:8081/api/v1/Assistant/GetAppointments`, {\n          id: this.$cookies.get(\"uuid\"),\n          user_type: \"patient\",\n          range: {\n            from: \"2020-10-13T06:01:07+02:00\",\n            to: \"2022-01-04T13:01:18+01:00\",\n          },\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.appointments = response.data.appointments;\n        });\n    },\n    submit() {\n      if (this.$cookies.get(\"uuid\") === null) {\n        this.$bvModal.show(\"modal-1\")\n        return\n      }\n      let specialist_id = \"\";\n      let speciality = \"\";\n      for (const i in this.specialists) {\n        if (this.specialists[i].fee_id == this.feeID) {\n          specialist_id = this.specialists[i].specialist_id;\n          speciality = this.specialists[i].speciality;\n          break;\n        }\n      }\n      console.log(specialist_id);\n\n      axios\n        .post(\"http://localhost:8081/api/v1/Assistant/CreateAppointment\", {\n          patient_id: this.$cookies.get(\"uuid\"),\n          specialist_id: specialist_id,\n          speciality: speciality,\n          scheduled_at: new Date(this.time).toISOString(),\n          duration: this.duration * 3600 * 1e9, // duration in nanoseconds\n          patient_comment: this.comment,\n          patient_symptoms: this.symptoms.split(\";\"),\n        })\n        .then((res) => {\n          console.log(res);\n        })\n        .finally(this.clearForm());\n    },\n  },\n  created() {\n    axios\n      .get(`http://localhost:8081/api/v1/Assistant/GetSpecialists`)\n      .then((response) => {\n        console.log(response.data);\n        this.specialists = response.data.specialists;\n      });\n    this.getAppointments();\n  },\n  formatTime(time) {\n    return \"elo\" + time;\n  },\n};\n// #007bff\n</script>\n\n<style scoped>\nlabel {\n  font-family: Avenir, Helvetica, Arial, sans-serif !important;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>"],"sourceRoot":"src/views"}]}